<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>genome_test: Mrpt Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">genome_test
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_mrpt-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Mrpt Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5bcc3893c5a74c8103f194d165f07d55"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mrpt.html#a5bcc3893c5a74c8103f194d165f07d55">Mrpt</a> (const Map&lt; const MatrixXf &gt; *X_, int n_trees_, int depth_, float density_, bool test_=true)</td></tr>
<tr class="separator:a5bcc3893c5a74c8103f194d165f07d55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a424dd623bbe111cc0a882d5dbbeb3129"><td class="memItemLeft" align="right" valign="top"><a id="a424dd623bbe111cc0a882d5dbbeb3129"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Mrpt</b> (const SparseMatrix&lt; float &gt; *Y_, int n_trees_, int depth_, float density_, bool test_=true)</td></tr>
<tr class="separator:a424dd623bbe111cc0a882d5dbbeb3129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd8779b8e40b3a72635908211abcb230"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mrpt.html#afd8779b8e40b3a72635908211abcb230">grow</a> ()</td></tr>
<tr class="separator:afd8779b8e40b3a72635908211abcb230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ff06586d6219e6bf9f1d764df1e80ad"><td class="memItemLeft" align="right" valign="top"><a id="a6ff06586d6219e6bf9f1d764df1e80ad"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>sparse_query</b> (const SparseMatrix&lt; float &gt;::ColXpr &amp;q, int k, int votes_required, int *out) const</td></tr>
<tr class="separator:a6ff06586d6219e6bf9f1d764df1e80ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fdf329297083525a457226f2bd9a45a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mrpt.html#a1fdf329297083525a457226f2bd9a45a">query</a> (const Map&lt; VectorXf &gt; &amp;q, int k, int votes_required, int *out, double &amp;projection_time, double &amp;exact_time, double &amp;elect_time) const</td></tr>
<tr class="separator:a1fdf329297083525a457226f2bd9a45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8e14594253f9755a6a66881c491ab61"><td class="memItemLeft" align="right" valign="top"><a id="ac8e14594253f9755a6a66881c491ab61"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>elect</b> (const VectorXf &amp;projected_query, int k, int votes_required, int *out) const</td></tr>
<tr class="separator:ac8e14594253f9755a6a66881c491ab61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26cad5e11fe7b438129e4924a83ba5b0"><td class="memItemLeft" align="right" valign="top"><a id="a26cad5e11fe7b438129e4924a83ba5b0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>sparse_elect</b> (VectorXf &amp;projected_query, int k, int votes_required, int *out) const</td></tr>
<tr class="separator:a26cad5e11fe7b438129e4924a83ba5b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c01b1a594187b3cdb2ce995aae4717"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mrpt.html#ae2c01b1a594187b3cdb2ce995aae4717">exact_knn</a> (const Map&lt; VectorXf &gt; &amp;q, int k, const VectorXi &amp;indices, int n_elected, int *out) const</td></tr>
<tr class="separator:ae2c01b1a594187b3cdb2ce995aae4717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad24705e06ee0dba4ca42ec760063be5a"><td class="memItemLeft" align="right" valign="top"><a id="ad24705e06ee0dba4ca42ec760063be5a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>sparse_exact_knn</b> (const SparseMatrix&lt; float &gt;::ColXpr &amp;q, int k, const VectorXi &amp;indices, int n_elected, int *out) const</td></tr>
<tr class="separator:ad24705e06ee0dba4ca42ec760063be5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af936713e7629e08e88d11346f2639ba0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mrpt.html#af936713e7629e08e88d11346f2639ba0">save</a> (const char *path) const</td></tr>
<tr class="separator:af936713e7629e08e88d11346f2639ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af31f777278ec7030e7351b6ed57ca766"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mrpt.html#af31f777278ec7030e7351b6ed57ca766">load</a> (const char *path)</td></tr>
<tr class="separator:af31f777278ec7030e7351b6ed57ca766"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5bcc3893c5a74c8103f194d165f07d55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bcc3893c5a74c8103f194d165f07d55">&#9670;&nbsp;</a></span>Mrpt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Mrpt::Mrpt </td>
          <td>(</td>
          <td class="paramtype">const Map&lt; const MatrixXf &gt; *&#160;</td>
          <td class="paramname"><em>X_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_trees_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>density_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>test_</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The constructor of the index. The inputs are the data for which the index will be built and additional parameters that affect the accuracy of the NN approximation. Concisely, larger n_trees_ or smaller depth values improve accuracy but slow down the queries. A general rule for the right balance is not known. The constructor does not actually build the trees, but that is done by a separate function 'grow' that has to be called before queries can be made. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">X_</td><td>- Pointer to a matrix containing the data. </td></tr>
    <tr><td class="paramname">n_trees_</td><td>- The number of trees to be used in the index. </td></tr>
    <tr><td class="paramname">depth_</td><td>- The depth of the trees. </td></tr>
    <tr><td class="paramname">density_</td><td>- Expected ratio of non-zero components in a projection matrix. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae2c01b1a594187b3cdb2ce995aae4717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2c01b1a594187b3cdb2ce995aae4717">&#9670;&nbsp;</a></span>exact_knn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Mrpt::exact_knn </td>
          <td>(</td>
          <td class="paramtype">const Map&lt; VectorXf &gt; &amp;&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const VectorXi &amp;&#160;</td>
          <td class="paramname"><em>indices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_elected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>find k nearest neighbors from data for the query point </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>- query point as a vector </td></tr>
    <tr><td class="paramname">k</td><td>- number of neighbors searched for </td></tr>
    <tr><td class="paramname">indices</td><td>- indices of the points in the original matrix where the search is made </td></tr>
    <tr><td class="paramname">out</td><td>- output buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="afd8779b8e40b3a72635908211abcb230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd8779b8e40b3a72635908211abcb230">&#9670;&nbsp;</a></span>grow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Mrpt::grow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The function whose call starts the actual index construction. Initializes arrays to store the tree structures and computes all the projections needed later. Then repeatedly calls method grow_subtree that builds a single RP-tree. </p>

</div>
</div>
<a id="af31f777278ec7030e7351b6ed57ca766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af31f777278ec7030e7351b6ed57ca766">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Mrpt::load </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Loads the index from a file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>- Filepath to the index file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if loading succeeded, false otherwise. </dd></dl>

</div>
</div>
<a id="a1fdf329297083525a457226f2bd9a45a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fdf329297083525a457226f2bd9a45a">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Mrpt::query </td>
          <td>(</td>
          <td class="paramtype">const Map&lt; VectorXf &gt; &amp;&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>votes_required</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>projection_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>exact_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>elect_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function finds the k approximate nearest neighbors of the query object q. The accuracy of the query depends on both the parameters used for index construction and additional parameters given to this function. This function implements two tricks to improve performance. The voting trick interprets each index object in leaves returned by tree traversals as votes, and only performs the final linear search with the 'elect' most voted objects. The priority queue trick keeps track of nodes where the split value was close to the projection so that we can split the tree traversal to both subtrees if we want. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>- The query object whose neighbors the function finds </td></tr>
    <tr><td class="paramname">k</td><td>- The number of neighbors the user wants the function to return </td></tr>
    <tr><td class="paramname">votes_required</td><td>- The number of votes required for an object to be included in the linear search step </td></tr>
    <tr><td class="paramname">out</td><td>- The output buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="af936713e7629e08e88d11346f2639ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af936713e7629e08e88d11346f2639ba0">&#9670;&nbsp;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Mrpt::save </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Saves the index to a file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>- Filepath to the output file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if saving succeeded, false otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cpp/<a class="el" href="_mrpt_8h_source.html">Mrpt.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
